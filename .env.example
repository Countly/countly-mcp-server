# Countly MCP Server - Environment Configuration
# Copy this file to .env and configure your settings

# ==============================================================================
# REQUIRED CONFIGURATION
# ==============================================================================

# Countly Server URL
# The base URL of your Countly server instance
# Example: https://your-countly-instance.com or https://api.count.ly
COUNTLY_SERVER_URL=https://api.count.ly


# ==============================================================================
# AUTHENTICATION (Choose ONE of the following methods)
# ==============================================================================

# Method 1: Direct Auth Token (recommended for development)
# Provide the authentication token directly as an environment variable
# COUNTLY_AUTH_TOKEN=your-auth-token-here

# Method 2: Auth Token File (recommended for production/Docker)
# Provide a path to a file containing the authentication token
# Useful for Docker secrets, Kubernetes secrets, or secure file storage
# COUNTLY_AUTH_TOKEN_FILE=/run/secrets/countly_token

# Note: If neither is set, the token must be provided by the MCP client
# via metadata.countlyAuthToken or as a tool argument


# ==============================================================================
# OPTIONAL CONFIGURATION
# ==============================================================================

# Request Timeout (in milliseconds)
# Maximum time to wait for Countly API responses
# Default: 30000 (30 seconds)
COUNTLY_TIMEOUT=30000


# ==============================================================================
# AUTHENTICATION PRIORITY
# ==============================================================================
# The server uses the following priority for authentication:
# 1. MCP client metadata (metadata.countlyAuthToken)
# 2. Tool argument (countly_auth_token)
# 3. Environment variable (COUNTLY_AUTH_TOKEN)
# 4. Token file (COUNTLY_AUTH_TOKEN_FILE)
#
# Client-provided tokens (1-2) will override server-level tokens (3-4)
# This allows multi-tenant setups where different clients use different tokens


# ==============================================================================
# DOCKER DEPLOYMENT EXAMPLE
# ==============================================================================
# For Docker deployments with secrets:
# 
# docker run -d \
#   -e COUNTLY_SERVER_URL=https://your-countly-instance.com \
#   -e COUNTLY_AUTH_TOKEN_FILE=/run/secrets/countly_token \
#   -v /path/to/token/file:/run/secrets/countly_token:ro \
#   countly-mcp-server
#
# Or using Docker Compose:
# 
# services:
#   countly-mcp:
#     image: countly-mcp-server
#     environment:
#       COUNTLY_SERVER_URL: https://your-countly-instance.com
#       COUNTLY_AUTH_TOKEN_FILE: /run/secrets/countly_token
#     secrets:
#       - countly_token
# secrets:
#   countly_token:
#     file: ./countly_token.txt


# ==============================================================================
# MCP CLIENT CONFIGURATION EXAMPLE
# ==============================================================================
# If using MCP client (e.g., Claude Desktop), configure in your MCP settings:
#
# {
#   "mcpServers": {
#     "countly": {
#       "command": "node",
#       "args": ["/path/to/countly-mcp-server/build/index.js"],
#       "env": {
#         "COUNTLY_SERVER_URL": "https://your-countly-instance.com",
#         "COUNTLY_AUTH_TOKEN": "your-auth-token-here"
#       }
#     }
#   }
# }
#
# Or using metadata for per-user authentication:
#
# {
#   "mcpServers": {
#     "countly": {
#       "command": "node",
#       "args": ["/path/to/countly-mcp-server/build/index.js"],
#       "env": {
#         "COUNTLY_SERVER_URL": "https://your-countly-instance.com"
#       },
#       "metadata": {
#         "countlyAuthToken": "your-auth-token-here"
#       }
#     }
#   }
# }
